<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta property="og:title" content="Create feature flags using file in Unleash"><meta property="og:description" content="Manage list feature flags with file yaml/json."><meta property="og:type" content="article"><meta property="og:url" content="/2022/01/manage-list-flags-with-file/"><meta property="article:published_time" content="2022-01-13T14:28:23+07:00"><meta property="article:modified_time" content="2022-01-13T18:05:22+07:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Create feature flags using file in Unleash"><meta name=twitter:description content="Manage list feature flags with file yaml/json."><meta name=generator content="Hugo 0.94.2"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Create feature flags using file in Unleash","url":"/2022/01/manage-list-flags-with-file/","wordCount":"1054","datePublished":"2022-01-13T14:28:23+07:00","dateModified":"2022-01-13T18:05:22+07:00","author":{"@type":"Person","name":"nhattien.ho"},"keywords":"Feature toggle, Testing, Unleash, Node.js","description":"Manage list feature flags with file yaml/json."}</script><link rel=canonical href=/2022/01/manage-list-flags-with-file/><title>Create feature flags using file in Unleash | Manabie Tech Blog</title><link href=/css/style.beb8012edc08ba10be012f079d618dc243812267efe62e11f22fe49618f976a4.css rel=stylesheet integrity="sha256-vrgBLtwIuhC+AS8HnWGNwkOBImfv5i4R8i/klhj5dqQ=" crossorigin=anonymous><script defer src=/js/fontawesome.min.f5072c55a0721857184db93a50561d7dc13975b4de2e19db7f81eb5f3fa57270.js integrity="sha256-9QcsVaByGFcYTbk6UFYdfcE5dbTeLhnbf4HrXz+lcnA=" crossorigin=anonymous></script>
<script src=/js/haven.umd.min.5f4a3edd16edd243f2a9b07dbf1b371f8f1b18fbb29319aba09431678609a175.js integrity="sha256-X0o+3Rbt0kPyqbB9vxs3H48bGPuykxmroJQxZ4YJoXU=" crossorigin=anonymous></script>
<script>Haven.create({notification:{styles:{background:"#428bca",textColor:"#ffffff",buttonBackgroundColor:"#f71559",buttonTextColor:"#ffffff"}},translations:{en:{notification:{policy:"Learn more.",message:"This website uses cookies.",accept:"Agree",decline:"Disagree"}}},services:[{name:"google-analytics",options:{id:"G-EJ2GNQJNM6"},purposes:["analytics"],inject:!0}]})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-EJ2GNQJNM6"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-EJ2GNQJNM6",{anonymize_ip:!1})}</script><style>div.highlight>pre{padding:1rem}</style></head><body><div class=blog-masthead><div class=container><nav class="nav blog-nav"><a class=nav-link href=/>Home</a></nav></div></div><header class=blog-header><div class=container><h1 class=blog-title dir=auto><a href=/ rel=home>Manabie Tech Blog</a></h1><p class="lead blog-description" dir=auto>Sharing the humble technical knowledge we&rsquo;re using to improve education</p></div></header><div class=container><div class=row><div class="col-sm-8 blog-main"><article class=blog-post><header><h2 class=blog-post-title dir=auto><a href=/2022/01/manage-list-flags-with-file/>Create feature flags using file in Unleash</a></h2><p class=blog-post-meta><time datetime=2022-01-13T14:28:23+07:00>Thu Jan 13, 2022</time>
in
<span class="fas fa-folder" aria-hidden=true></span>&nbsp;<a href=/categories/feature-toggle/ rel="category tag">Feature toggle</a>, <a href=/categories/testing/ rel="category tag">Testing</a>
<span class="fas fa-tag" aria-hidden=true></span>&nbsp;<a href=/tags/feature-toggle/ rel=tag>Feature toggle</a>, <a href=/tags/unleash/ rel=tag>Unleash</a>, <a href=/tags/node.js/ rel=tag>Node.js</a></p></header><p>Have you ever struggle having an overview of the feature toggles across your services and applications, especially when you have a lot on the table? We&rsquo;ve been there before!
In this blog, let&rsquo;s learn how to create a list of feature toggles in Unleash using file.
But first, let&rsquo;s learn some concept of feature toggle and Unleash</p><h4 id=what-is-feature-toggle-feature-flag>What is feature toggle (feature flag)?</h4><p>Feature toggle (Feature flag) is a technique that allows you to disable some functionality of your application, through settings, without having to deploy new code.</p><h4 id=what-is-unleash>What is Unleash?</h4><p><a href=https://docs.getunleash.io/>Unleash</a> is a feature toggle system, that gives you a great overview of all feature toggles across all your applications and services. It comes with official client implementations for Java, Node.js, Go, Ruby, Python and .Net.</p><h4 id=why-we-use-file-to-create-feature-flags-instead-of-admin-ui>Why we use file to create feature flags instead of Admin UI?</h4><p>At Manabie, we manage the addition and removal of feature flags with pull request, so we need a solution to manage the list of feature flags by file. Developers can see and change the list of feature flags by modifying this file, don&rsquo;t need to access the admin page. The list of feature flags will be updated after we deploy new backend code.</p><h4 id=how-to-use-file-to-manage-list-of-feature-flags-in-unleash>How to use file to manage list of feature flags in Unleash?</h4><p>To run Unleash locally, we need:</p><ul><li><a href=https://nodejs.org/en/download/>Node.js</a> (version 14 or later)</li><li><a href=https://www.postgresql.org/download/>PostgreSQL</a> (version 10 or later)</li><li><a href=https://docs.getunleash.io/deploy/database-setup>Create an unleash user and database.</a></li></ul><h5 id=start-unleash-server>Start Unleash server</h5><ul><li>Create a new folder/directory on your development computer.</li><li>From a terminal/bash shell, install the dependencies:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span> npm init
</span></span><span style=display:flex><span> npm install unleash-server --save
</span></span></code></pre></div><ul><li>Create a file called server.js, paste the following into it and save.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>unleash</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;unleash-server&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>options</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>db</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>ssl</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>host</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;localhost&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>port</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>9432</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>database</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;unleash&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>user</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;root&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>password</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;root&#39;</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>server</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>port</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>4242</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#a6e22e>unleash</span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>start</span>(<span style=color:#a6e22e>options</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>((<span style=color:#a6e22e>unleash</span>) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(
</span></span><span style=display:flex><span>      <span style=color:#e6db74>`Unleash started on http://localhost:</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>unleash</span>.<span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;port&#39;</span>)<span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>,
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>  });
</span></span></code></pre></div><ul><li>Run <code>server.js</code>:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>node server.js
</span></span></code></pre></div><p>Once the Unleash server has started, you will see the message:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>Unleash started on http://localhost:4242
</span></span></code></pre></div><p>The first time Unleash starts, it will create a default user which you can use to sign-in to you Unleash instance and add more users with:</p><ul><li>username: <code>admin</code></li><li>password: <code>unleash4all</code></li></ul><p>This is UI Admin of Unleash:
<img src=./images/unleash1.png alt=alt></p><h5 id=use-startup-import-in-unleash-to-create-list-of-feature-flags>Use startup import in Unleash to create list of feature flags</h5><p>You can import a json or yaml file via the configuration option <code>import</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>file</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;feature.yaml&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>keepExisting</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>dropBeforeImport</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span> }
</span></span></code></pre></div><p>If you want the database to be cleaned before import (all strategies and features will be removed), set the <code>dropBeforeImport</code> parameter.
It is also possible to not override existing feature toggles (and strategies) by using the <code>keepExisting</code> parameter.</p><p>Note: <em>You should be careful when using drop parameter in production environments, as it will clean current state.</em></p><p>Put <code>import</code> configuration to options in <code>server.js</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>unleash</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;unleash-server&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>options</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>db</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>ssl</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>host</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;localhost&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>port</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>9432</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>database</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;unleash&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>user</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;root&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>password</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;root&#39;</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>server</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>port</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>4242</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>import</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>file</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;feature.yaml&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>keepExisting</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>dropBeforeImport</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#a6e22e>unleash</span>
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>start</span>(<span style=color:#a6e22e>options</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>then</span>((<span style=color:#a6e22e>unleash</span>) =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(
</span></span><span style=display:flex><span>            <span style=color:#e6db74>`Unleash started on http://localhost:</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>unleash</span>.<span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;port&#39;</span>)<span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>,
</span></span><span style=display:flex><span>        );
</span></span><span style=display:flex><span>    });
</span></span></code></pre></div><h5 id=structure-of-file-featureyaml>Structure of file feature.yaml</h5><p>Create a yaml file with the following structure:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>version</span>: <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span><span style=color:#f92672>features</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>feature_xxxx_v1</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>description</span>: <span style=color:#e6db74>&#39;feature_xxxx_v1&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>release</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>project</span>: <span style=color:#ae81ff>default</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>stale</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>variants</span>: []
</span></span><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>feature_yyyyy_v1</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>description</span>: <span style=color:#e6db74>&#39;feature_xxxx_v1&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>release</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>project</span>: <span style=color:#ae81ff>default</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>stale</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>variants</span>: []
</span></span><span style=display:flex><span><span style=color:#f92672>strategies</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>strategy_organization</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>strategy organization to enable/disable feature using organization ID</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>parameters</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>organizations</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>type</span>: <span style=color:#ae81ff>list</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>description</span>: <span style=color:#ae81ff>list of organizations</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>required</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>deprecated</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span><span style=color:#f92672>featureStrategies</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>featureName</span>: <span style=color:#ae81ff>feature_xxxx_v1</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>projectId</span>: <span style=color:#ae81ff>default</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>: <span style=color:#ae81ff>development</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>strategyName</span>: <span style=color:#ae81ff>strategy_organization</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>parameters</span>: {}
</span></span><span style=display:flex><span>    <span style=color:#f92672>constraints</span>: []
</span></span><span style=display:flex><span>  - <span style=color:#f92672>featureName</span>: <span style=color:#ae81ff>feature_xxxx_v1</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>projectId</span>: <span style=color:#ae81ff>default</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>: <span style=color:#ae81ff>production</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>strategyName</span>: <span style=color:#ae81ff>strategy_organization</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>parameters</span>: {}
</span></span><span style=display:flex><span>    <span style=color:#f92672>constraints</span>: []
</span></span><span style=display:flex><span>  - <span style=color:#f92672>featureName</span>: <span style=color:#ae81ff>feature_yyyyy_v1</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>projectId</span>: <span style=color:#ae81ff>default</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>: <span style=color:#ae81ff>development</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>strategyName</span>: <span style=color:#ae81ff>strategy_organization</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>parameters</span>: {}
</span></span><span style=display:flex><span>    <span style=color:#f92672>constraints</span>: []
</span></span><span style=display:flex><span>  - <span style=color:#f92672>featureName</span>: <span style=color:#ae81ff>feature_yyyyy_v1</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>projectId</span>: <span style=color:#ae81ff>default</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>: <span style=color:#ae81ff>production</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>strategyName</span>: <span style=color:#ae81ff>strategy_organization</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>parameters</span>: {}
</span></span><span style=display:flex><span>    <span style=color:#f92672>constraints</span>: []
</span></span><span style=display:flex><span><span style=color:#f92672>environments</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>default</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>production</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>sortOrder</span>: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>protected</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>development</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>development</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>sortOrder</span>: <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>protected</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>production</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>production</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>sortOrder</span>: <span style=color:#ae81ff>200</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>protected</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>staging</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>production</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>sortOrder</span>: <span style=color:#ae81ff>300</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>protected</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span><span style=color:#f92672>featureEnvironments</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>featureName</span>: <span style=color:#ae81ff>feature_yyyyy_v1</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>: <span style=color:#ae81ff>development</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>featureName</span>: <span style=color:#ae81ff>feature_yyyyy_v1</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>: <span style=color:#ae81ff>production</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>featureName</span>: <span style=color:#ae81ff>feature_xxxx_v1</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>: <span style=color:#ae81ff>development</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>featureName</span>: <span style=color:#ae81ff>feature_xxxx_v1</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>: <span style=color:#ae81ff>production</span>
</span></span></code></pre></div><p>In this file, we have:</p><p><code>features</code>: list of <a href=https://docs.getunleash.io/user_guide/create_feature_toggle>feature toggles</a>, a feature toggle includes <em>description</em>, <em>type</em>,<a href=https://docs.getunleash.io/advanced/toggle_variants><em>variants</em></a>&mldr;. If a toggle has <em>variants</em>, then the <em>variants</em> object can also contain an optional payload property. The payload will contain data about the variant&rsquo;s payload: what type it is, and what the content is. In this example, there are 2 feature toggles <em>feature_xxxx_v1</em> and <em>feature_yyyyy_v1</em>.</p><p>Note: <em>Unleash uses a fallback variant called &ldquo;disabled&rdquo; to indicate that a toggle has no variants. However, you are free to create a variant called &ldquo;disabled&rdquo; yourself. In that case you can tell them apart by checking the variant&rsquo;s enabled property: if the toggle has no variants, enabled will be false. If the toggle is the &ldquo;disabled&rdquo; variant that you created, it will have enabled set to true.</em></p><p><code>strategies</code>: you can define your list of custom <a href=https://docs.getunleash.io/user_guide/activation_strategy><em>strategies</em></a>. Unleash comes with a few common activation strategies. Some of them require the client to provide the unleash-context, which gives the necessary context for Unleash.In this example, I create a strategy named <em>strategy_organization</em></p><p><code>environments</code>: list of custom <a href=https://docs.getunleash.io/user_guide/environments><em>environments</em></a>.Environments is a new way to organize activation strategy configurations for feature toggles into separate environments. In Unleash, a feature lives across all your environments — after all, the goal is to get the new feature released as soon as possible — but it make sense to configure the activation differently per environment.(Environments are available in Unleash v4.3.x and later)</p><p><code>featureStrategies</code>: relationship between your custom feature flags, strategies, and environments.</p><p><code>featureEnvironments</code>: relationship between your custom feature flags,and environments.</p><p>Let&rsquo;s start unleash server again</p><p>Now, <code>feature_xxxx_v1</code> and <code>feature_yyyyy_v1</code> has been added to the list:
<img src=./images/unleash2.png alt="List feature flag"></p><p>In addition to the default strategies, <code>strategy_organization</code> has been added to the list:
<img src=./images/strategies.png alt="List strategies"></p><p>Strategy of feature_xxxx_v1:
<img src=./images/feature_xxxx_v1_strategy.png alt="Strategies of feature_xxxx_v1"></p><p>List of environment
<img src=./images/environments.png alt="List of environments"></p><h4 id=conclusion>Conclusion</h4><p>And that&rsquo;s all for now!
I just introduced about how to create a list of feature toggles in Unleash using YAML file( can also use JSON file). This approach makes it possible for our developers to manage the list of feature flags in our source code.
You can read more about import and export in Unleash <a href=https://docs.getunleash.io/deploy/import_export>here</a></p><hr><footer><div class=meta_item><span class=meta_text>About <a href=/author/nhattien.ho>Ho Nguyen Nhat Tien</a></span><br><i>Backend developer in Manabie</i></div><hr><section><h4>Share</h4><nav class="nav sharing-icons"><a class=nav-item href="https://www.facebook.com/sharer/sharer.php?u=%2f2022%2f01%2fmanage-list-flags-with-file%2f" title="Share on Facebook"><span class="fab fa-facebook-f fa-2x" aria-hidden=true></span></a>
<a class=nav-item href="https://www.linkedin.com/shareArticle?mini=true&url=%2f2022%2f01%2fmanage-list-flags-with-file%2f" title="Share on LinkedIn"><span class="fab fa-linkedin-in fa-2x" aria-hidden=true></span></a>
<a class=nav-item href="https://twitter.com/intent/tweet?url=%2f2022%2f01%2fmanage-list-flags-with-file%2f&text=Create%20feature%20flags%20using%20file%20in%20Unleash" title="Tweet this"><span class="fab fa-twitter fa-2x"></span></a></nav></section><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//manabie.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></footer></article></div><aside class="col-sm-3 ml-auto blog-sidebar"><section class=sidebar-module><h4>Links</h4><ol class=list-unstyled><li><a href=https://manabie.com>About Us</a></li><li><a href=https://manabie.breezy.hr>Careers</a></li></ol></section></aside></div></div><footer class=blog-footer><p dir=auto>Except where otherwise noted, content on this site is licensed under a <a href=https://creativecommons.org/licenses/by-sa/4.0/>Creative Commons Attribution 4.0 International license</a>.</p><p><a href=#>Back to top</a></p></footer></body></html>