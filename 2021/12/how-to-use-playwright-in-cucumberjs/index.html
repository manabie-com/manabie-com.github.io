<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta property="og:title" content="How to use Playwright in cucumberjs"><meta property="og:description" content="This tutorial helps you run web automation tests, using Playwright in Cucumber."><meta property="og:type" content="article"><meta property="og:url" content="/2021/12/how-to-use-playwright-in-cucumberjs/"><meta property="article:published_time" content="2021-12-29T10:45:33+00:00"><meta property="article:modified_time" content="2021-12-29T17:46:06+07:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="How to use Playwright in cucumberjs"><meta name=twitter:description content="This tutorial helps you run web automation tests, using Playwright in Cucumber."><meta name=generator content="Hugo 0.102.1"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"How to use Playwright in cucumberjs","url":"/2021/12/how-to-use-playwright-in-cucumberjs/","wordCount":"550","datePublished":"2021-12-29T10:45:33+00:00","dateModified":"2021-12-29T17:46:06+07:00","author":{"@type":"Person","name":"nploi"},"keywords":"DevSecOps, Testing, bdd, end-to-end, cucumber, automation, test","description":"This tutorial helps you run web automation tests, using Playwright in Cucumber."}</script><link rel=canonical href=/2021/12/how-to-use-playwright-in-cucumberjs/><title>How to use Playwright in cucumberjs | Manabie Tech Blog</title><link href=/css/style.beb8012edc08ba10be012f079d618dc243812267efe62e11f22fe49618f976a4.css rel=stylesheet integrity="sha256-vrgBLtwIuhC+AS8HnWGNwkOBImfv5i4R8i/klhj5dqQ=" crossorigin=anonymous><script defer src=/js/fontawesome.min.f5072c55a0721857184db93a50561d7dc13975b4de2e19db7f81eb5f3fa57270.js integrity="sha256-9QcsVaByGFcYTbk6UFYdfcE5dbTeLhnbf4HrXz+lcnA=" crossorigin=anonymous></script>
<script src=/js/haven.umd.min.5f4a3edd16edd243f2a9b07dbf1b371f8f1b18fbb29319aba09431678609a175.js integrity="sha256-X0o+3Rbt0kPyqbB9vxs3H48bGPuykxmroJQxZ4YJoXU=" crossorigin=anonymous></script>
<script>Haven.create({notification:{styles:{background:"#428bca",textColor:"#ffffff",buttonBackgroundColor:"#f71559",buttonTextColor:"#ffffff"}},translations:{en:{notification:{policy:"Learn more.",message:"This website uses cookies.",accept:"Agree",decline:"Disagree"}}},services:[{name:"google-analytics",options:{id:"G-EJ2GNQJNM6"},purposes:["analytics"],inject:!0}]})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-EJ2GNQJNM6"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-EJ2GNQJNM6",{anonymize_ip:!1})}</script><style>div.highlight>pre{padding:1rem}</style></head><body><div class=blog-masthead><div class=container><nav class="nav blog-nav"><a class=nav-link href=/>Home</a></nav></div></div><header class=blog-header><div class=container><h1 class=blog-title dir=auto><a href=/ rel=home>Manabie Tech Blog</a></h1><p class="lead blog-description" dir=auto>Sharing the humble technical knowledge we&rsquo;re using to improve education</p></div></header><div class=container><div class=row><div class="col-sm-8 blog-main"><article class=blog-post><header><h2 class=blog-post-title dir=auto><a href=/2021/12/how-to-use-playwright-in-cucumberjs/>How to use Playwright in cucumberjs</a></h2><p class=blog-post-meta><time datetime=2021-12-29T10:45:33Z>Wed Dec 29, 2021</time>
in
<span class="fas fa-folder" aria-hidden=true></span>&nbsp;<a href=/categories/devsecops/ rel="category tag">DevSecOps</a>, <a href=/categories/testing/ rel="category tag">Testing</a>
<span class="fas fa-tag" aria-hidden=true></span>&nbsp;<a href=/tags/bdd/ rel=tag>bdd</a>, <a href=/tags/end-to-end/ rel=tag>end-to-end</a>, <a href=/tags/cucumber/ rel=tag>cucumber</a>, <a href=/tags/automation/ rel=tag>automation</a>, <a href=/tags/test/ rel=tag>test</a></p></header><p>In our previous blog article <a href=https://blog.manabie.io/2021/12/why-we-use-cucumber-for-end-to-end-testing/>HERE</a>, we explained why we&rsquo;re using Cucumber for E2E test at Manabie, and provided a brief understanding about Cucumber.</p><p>This time, let&rsquo;s dive a little bit deeper!</p><p>Before we start, let&rsquo;s cover a brief introduction to Cucumber again, and afterward, about Playwright.</p><h3 id=cucumberhttpscucumberio><a href=https://cucumber.io/>Cucumber</a></h3><p>Cucumber is a tool that supports <a href=https://cucumber.io/docs/bdd>Behaviour-Driven Development</a>(BDD), If you’re new to Behaviour-Driven Development read <a href=https://cucumber.io/docs/bdd/>BDD introduction</a> first.</p><h4 id=cucumberjshttpsgithubcomcucumbercucumber-js><a href=https://github.com/cucumber/cucumber-js>Cucumberjs</a></h4><ul><li>is an open-source software testing tool written in Javascript, while the tests are written in Gherkin, a non-technical and human-readable language.</li></ul><h4 id=gherkin-syntax>Gherkin Syntax</h4><p>Gherkin uses a set of special keywords to give structure and meaning to executable specifications. Each keyword is translated to many spoken languages; in this reference we’ll use English.</p><p>Each line that isn’t a blank line has to start with a Gherkin keyword, followed by any text you like. The only exceptions are the feature and scenario descriptions.</p><p>The primary keywords are:</p><ul><li>Feature</li><li>Rule (as of Gherkin 6)</li><li>Example (or Scenario)</li><li>Given, When, Then, And, But for steps (or *)</li><li>Background</li><li>Scenario Outline (or Scenario Template)</li><li>Examples (or Scenarios)</li></ul><p>There are a few secondary keywords as well:</p><ul><li><code>"""</code> (Doc Strings)</li><li><code>|</code> (Data Tables)</li><li><code>@</code> (Tags)</li><li><code>#</code> (Comments)</li></ul><h3 id=playwrighthttpsgithubcommicrosoftplaywright><a href=https://github.com/microsoft/playwright>Playwright</a></h3><p>Playwright is a framework for Web Testing and Automation. It allows testing Chromium, Firefox and WebKit with a single API. Playwright is built to enable cross-browser web automation that is ever-green, capable, reliable and fast.</p><h4 id=capabilities>Capabilities</h4><p>Playwright is built to automate the broad and growing set of web browser capabilities used by Single Page Apps and Progressive Web Apps.</p><ul><li>Scenarios that span multiple page, domains and iframes</li><li>Auto-wait for elements to be ready before executing actions (like click, fill)</li><li>Intercept network activity for stubbing and mocking network requests</li><li>Emulate mobile devices, geolocation, permissions</li><li>Support for web components via shadow-piercing selectors</li><li>Native input events for mouse and keyboard</li><li>Upload and download files</li></ul><h3 id=getting-started-with-cucumber-and-playwright-example>Getting Started with Cucumber and Playwright Example</h3><h4 id=prerequisites-and-installations>Prerequisites and Installations</h4><ul><li>Prerequisites:<ul><li><a href=https://nodejs.org/en/>Node.js</a> (12 or higher)</li></ul></li><li>Installations:<ul><li><p>Install Cucumber modules with <a href=https://yarnpkg.com/en/>yarn</a> or <a href=https://www.npmjs.com/>npm</a></p><ul><li><p>yarn:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yarn add @cucumber/cucumber
</span></span></code></pre></div></li><li><p>npm:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm i @cucumber/cucumber
</span></span></code></pre></div></li></ul></li><li><p>Install Playwright</p><ul><li><p>yarn:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yarn add playwright
</span></span></code></pre></div></li><li><p>npm:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm i playwright
</span></span></code></pre></div></li><li><p>Add the following files:</p><ul><li><p><code>features/search_job_openings_at_manabie.feature</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-feature data-lang=feature><span style=display:flex><span><span style=color:#66d9ef>Feature:</span><span style=color:#a6e22e> Search job openings at Manabie
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>    </span><span style=color:#66d9ef>Scenario:</span><span style=color:#a6e22e> Bob search job openings at Manabie
</span></span></span><span style=display:flex><span><span style=color:#a6e22e></span><span style=color:#66d9ef>        Given </span><span style=color:#a6e22e>Bob opens Manabie website
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>        </span><span style=color:#66d9ef>When </span><span style=color:#a6e22e>Bob goes to Careers section
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>        </span><span style=color:#66d9ef>Then </span><span style=color:#a6e22e>Bob sees all job openings at Manabie
</span></span></span></code></pre></div></li><li><p><code>features/support/world.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>setWorldConstructor</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;@cucumber/cucumber&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>playwright</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;playwright&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CustomWorld</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>async</span> <span style=color:#a6e22e>openUrl</span>(<span style=color:#a6e22e>url</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>browser</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>playwright</span>.<span style=color:#a6e22e>chromium</span>.<span style=color:#a6e22e>launch</span>({
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>headless</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>context</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>browser</span>.<span style=color:#a6e22e>newContext</span>();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>page</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>newPage</span>();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>await</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>page</span>.<span style=color:#66d9ef>goto</span>(<span style=color:#a6e22e>url</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>setWorldConstructor</span>(<span style=color:#a6e22e>CustomWorld</span>);
</span></span></code></pre></div></li><li><p><code>features/support/steps.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>Given</span>, <span style=color:#a6e22e>When</span>, <span style=color:#a6e22e>Then</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;@cucumber/cucumber&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Given</span>(<span style=color:#e6db74>&#34;Bob opens Manabie website&#34;</span>, { <span style=color:#a6e22e>timeout</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>60</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>1000</span> }, <span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> () {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>openUrl</span>(<span style=color:#e6db74>&#39;http://manabie.com/&#39;</span>);
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>When</span>(<span style=color:#e6db74>&#34;Bob goes to Careers section&#34;</span>, <span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> () {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>page</span>.<span style=color:#a6e22e>click</span>(<span style=color:#e6db74>&#39;text=Careers&#39;</span>);
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Then</span>(<span style=color:#e6db74>&#34;Bob sees all job openings at Manabie&#34;</span>, <span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> () {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>page</span>.<span style=color:#a6e22e>click</span>(<span style=color:#e6db74>&#39;text=View Openings&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>page</span>.<span style=color:#a6e22e>waitForSelector</span>(<span style=color:#e6db74>&#39;text=Our Openings&#39;</span>);
</span></span><span style=display:flex><span>});
</span></span></code></pre></div></li></ul></li><li><p>Run:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./node_modules/.bin/cucumber-js --exit
</span></span></code></pre></div></li><li><p>After run:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ae81ff>1</span> scenario <span style=color:#f92672>(</span><span style=color:#ae81ff>1</span> passed<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span> steps <span style=color:#f92672>(</span><span style=color:#ae81ff>3</span> passed<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>0m03.739s <span style=color:#f92672>(</span>executing steps: 0m03.729s<span style=color:#f92672>)</span>
</span></span></code></pre></div></li></ul></li></ul></li></ul><h3 id=conclusion>Conclusion</h3><p>Cucumber and Playwright are great frameworks. I hope this article will be of some use to you. <a href=/content/posts/how-to-use-playwright-in-cucumberjs/example>Here is source code</a>, thank you.</p><p>Curious for more about how we&rsquo;re tackling testing problems at Manabie? Join us as an Engineer <a href=https://manabie.breezy.hr/>HERE</a>, or follow our blog for future articles.</p><h3 id=references>References</h3><ul><li><a href=https://github.com/cucumber/cucumber-js>https://github.com/cucumber/cucumber-js</a></li><li><a href=https://github.com/microsoft/playwright>https://github.com/microsoft/playwright</a></li></ul><hr><footer><div class=meta_item><span class=meta_text>About <a href=/author/nploi>nploi</a></span><br><i>I love open source &lt;3</i><br><span class=meta_text><a href=https://www.linkedin.com/in/nploi target=_blank>https://www.linkedin.com/in/nploi</a></span></div><hr><section><h4>Share</h4><nav class="nav sharing-icons"><a class=nav-item href="https://www.facebook.com/sharer/sharer.php?u=%2f2021%2f12%2fhow-to-use-playwright-in-cucumberjs%2f" title="Share on Facebook"><span class="fab fa-facebook-f fa-2x" aria-hidden=true></span></a>
<a class=nav-item href="https://www.linkedin.com/shareArticle?mini=true&url=%2f2021%2f12%2fhow-to-use-playwright-in-cucumberjs%2f" title="Share on LinkedIn"><span class="fab fa-linkedin-in fa-2x" aria-hidden=true></span></a>
<a class=nav-item href="https://twitter.com/intent/tweet?url=%2f2021%2f12%2fhow-to-use-playwright-in-cucumberjs%2f&text=How%20to%20use%20Playwright%20in%20cucumberjs" title="Tweet this"><span class="fab fa-twitter fa-2x"></span></a></nav></section><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//manabie.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></footer></article></div><aside class="col-sm-3 ml-auto blog-sidebar"><section class=sidebar-module><h4>Links</h4><ol class=list-unstyled><li><a href=https://manabie.com>About Us</a></li><li><a href=https://manabie.breezy.hr>Careers</a></li></ol></section></aside></div></div><footer class=blog-footer><p dir=auto>Except where otherwise noted, content on this site is licensed under a <a href=https://creativecommons.org/licenses/by-sa/4.0/>Creative Commons Attribution 4.0 International license</a>.</p><p><a href=#>Back to top</a></p></footer></body></html>